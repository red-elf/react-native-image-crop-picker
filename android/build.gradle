apply plugin: "com.android.library"
apply plugin: "com.facebook.react"
apply plugin: "kotlinx-serialization"
apply plugin: "org.jetbrains.kotlin.android"

react {

}

def enableProguardInReleaseBuilds = false

def jscFlavor = 'org.webkit:android-jsc:+'

def DEFAULT_COMPILE_SDK_VERSION = 30
def DEFAULT_BUILD_TOOLS_VERSION = "29.0.3"
def DEFAULT_TARGET_SDK_VERSION = 30
def DEFAULT_MIN_SDK_VERSION = 29

android {

    namespace "com.reactnative.ivpusic.imagepicker"

    compileSdk DEFAULT_COMPILE_SDK_VERSION
    buildToolsVersion DEFAULT_BUILD_TOOLS_VERSION

    defaultConfig {

        versionCode 2
        minSdkVersion DEFAULT_MIN_SDK_VERSION
        targetSdkVersion DEFAULT_TARGET_SDK_VERSION
        missingDimensionStrategy 'react-native-camera', 'general'
    }

    lintOptions {

        abortOnError false
    }

    dependencies {

        implementation 'com.drewnoakes:metadata-extractor:2.19.0'
        implementation 'androidx.exifinterface:exifinterface:1.3.7'
        implementation "com.facebook.react:react-android:0.73.6"
        implementation "com.facebook.android:facebook-android-sdk:latest.release"

        if (hermesEnabled.toBoolean()) {

            implementation "com.facebook.react:hermes-android:0.73.6"

        } else {

            implementation jscFlavor
        }

        implementation 'com.github.yalantis:ucrop:2.2.6-native'
        implementation 'androidx.swiperefreshlayout:swiperefreshlayout:1.1.0'
    }
}

allprojects {

    repositories {

        maven {

            url "../node_modules/react-native/android"
        }
        maven { url "https://jitpack.io" }
        google()
        mavenLocal()
        mavenCentral()
    }
}

buildscript {

    ext {

        buildToolsVersion = "34.0.0"
        minSdkVersion = 23
        compileSdkVersion = 34
        targetSdkVersion = 34
        ndkVersion = "25.1.8937393"
        kotlinVersion = "1.8.0"
    }

    repositories {

        maven {

            url "../node_modules/react-native/android"
        }
        maven { url "https://jitpack.io" }
        google()
        mavenLocal()
        mavenCentral()
    }

    dependencies {

        classpath "com.android.tools.build:gradle"
        classpath "com.facebook.react:react-native-gradle-plugin"
        classpath "org.jetbrains.kotlin:kotlin-gradle-plugin"
        classpath "org.jetbrains.kotlin:kotlin-serialization:${kotlinVersion}"
    }
}

